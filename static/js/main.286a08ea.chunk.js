(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),i=n(17),a=n(14),r=n.n(a),l=(n(22),n(4)),o=n(12),j=n(3),d=(n(23),n(24),n(0)),u=function(){return Object(d.jsx)("header",{children:Object(d.jsx)("h1",{className:"header__title",children:"What the weather is like today?"})})},b=n(38),m=function(e){return fetch("".concat("https://api.openweathermap.org/data/2.5/","weather?q=").concat(e,"&units=metric&APPID=").concat("be2e56e9809ab02e33a32ab7bba23488")).then((function(e){return e.json()}))},h=function(e,t,n){t({id:e.id,name:e.name,temp:e.main.temp,feels:e.main.feels_like,wind:e.wind.speed,humidity:e.main.humidity,pressure:e.main.pressure,tempMax:e.main.temp_max,tempMin:e.main.temp_min,country:e.sys.country,sunrise:e.sys.sunrise,sunset:e.sys.sunset,description:e.weather[0].description,icon:e.weather[0].icon,title:e.weather[0].main}),n&&n("")},p=(n(26),function(e){var t=e.onAddNewLocation,n=Object(c.useState)(""),s=Object(j.a)(n,2),i=s[0],a=s[1],r=Object(c.useState)(!0),l=Object(j.a)(r,2),o=l[0],u=l[1],p=Object(c.useState)(!1),O=Object(j.a)(p,2),x=O[0],f=O[1],_=Object(b.a)(i);Object(c.useEffect)((function(){u(!i),i!==_&&f(!1)}),[i]);var N=function(e){e.preventDefault(),i&&m(i).then((function(e){return h(e,t,a)})).catch((function(e){console.log(e),f(!0)}))};return Object(d.jsx)("section",{className:"search__box",children:Object(d.jsxs)("form",{className:"wrapper is-flex is-relative",onSubmit:N,children:[Object(d.jsx)("input",{value:i,onChange:function(e){a(e.target.value)},className:"input mr-4 ".concat(x?"is-danger":"is-link"),type:"text",name:"input",placeholder:"Type your city"}),x?Object(d.jsx)("p",{className:"help is-danger is-absolute",children:"Can't find a city"}):"",Object(d.jsx)("button",{disabled:o,onClick:N,type:"button",className:"button is-link",children:"Add"})]})})}),O=(n(27),n(15)),x=n.n(O),f=(n(28),n(29),function(e){var t=e.setModalActive,n=e.children;return Object(d.jsx)("div",{className:"modalw",onClick:function(){t(!1)},children:Object(d.jsxs)("div",{className:"modal__content",children:[n,Object(d.jsx)("div",{className:"has-text-centered mt-2",children:Object(d.jsx)("button",{onClick:function(){t(!1)},type:"button",className:"button is-danger is-small",children:"Close"})})]})})}),_=function(e){var t=e.onAddNewLocation,n=e.handleDeleteElement,s=e.id,i=e.name,a=e.card,r=Object(c.useState)(!1),o=Object(j.a)(r,2),u=o[0],b=o[1],p=Object(c.useState)(!1),O=Object(j.a)(p,2),_=O[0],N=O[1],v=Object(c.useState)("Update"),g=Object(j.a)(v,2),y=g[0],w=g[1],S=function(e){var t=new Date(1e3*e);return String(t.getHours())};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("div",{className:"card__image-container",children:Object(d.jsx)("img",{className:"is-scale",src:"https://openweathermap.org/img/wn/".concat(a.icon,"@2x.png"),alt:"weather"})}),Object(d.jsxs)("div",{className:"card__content",children:[Object(d.jsx)("p",{className:"card__title",children:a.name}),Object(d.jsxs)("p",{className:"card__info",children:["Date:",Object(d.jsx)("span",{children:(new Date).toJSON().slice(0,10).replace(/-/g,"/")})]}),Object(d.jsxs)("p",{className:"card__info",children:["Temperature:",Object(d.jsx)("span",{children:a.temp.toFixed(0)})]}),Object(d.jsxs)("p",{className:"card__info",children:["Feels like:",Object(d.jsx)("span",{children:a.feels.toFixed(0)})]}),Object(d.jsxs)("p",{className:"card__info",children:["Wind:",Object(d.jsx)("span",{children:a.wind})]}),Object(d.jsxs)("div",{className:"has-text-center mt-4",children:[Object(d.jsx)("button",{onClick:function(){b(!0)},className:"button is-primary is-small",type:"button",children:"Details"}),Object(d.jsx)("button",{onClick:function(){m(i).then((function(e){h(Object(l.a)({},e),t),N(!1)})).catch((function(e){return e})),N(!0),w("Updated")},className:x()("button is-link is-small mx-2",{"is-loading":_}),type:"button",children:y}),Object(d.jsx)("button",{onClick:function(){n(s)},className:"is-info button is-small",type:"button",children:"Delete"})]})]})]}),u&&Object(d.jsx)(f,{modalActive:u,setModalActive:b,card:a,children:Object(d.jsx)("div",{className:"intro",children:Object(d.jsxs)("div",{className:"intro__content",children:[Object(d.jsx)("p",{className:"intro__timezone",children:i}),Object(d.jsx)("hr",{}),Object(d.jsxs)("p",{className:"intro__title",children:["Temperature",Object(d.jsx)("span",{children:a.temp})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Feels like",Object(d.jsx)("span",{children:a.feels})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Min temperature",Object(d.jsx)("span",{children:a.tempMin})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Max temperature",Object(d.jsx)("span",{children:a.tempMax})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Humidity",Object(d.jsx)("span",{children:a.humidity})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Pressure",Object(d.jsx)("span",{children:a.pressure})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Sunrise",Object(d.jsxs)("span",{children:[S(a.sunrise)," ","a.m."]})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Sunset",Object(d.jsxs)("span",{children:[S(a.sunset)," ","p.m."]})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Country",Object(d.jsx)("span",{children:a.country})]}),Object(d.jsxs)("p",{className:"intro__title",children:["Timezone id",Object(d.jsx)("span",{children:a.id})]})]})})})]})},N=function(e){var t=e.cards,n=e.refresh,c=e.handleDeleteElement,s=e.onAddNewLocation;return Object(d.jsx)("section",{className:"cards__list",children:Object(d.jsx)("article",{className:"cards__list--items",children:t&&t.map((function(e,t){return Object(d.jsx)(_,Object(l.a)({card:e,refresh:n,handleDeleteElement:c,onAddNewLocation:s},e),t.toString())}))})})};var v=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)((function(){var e=localStorage.getItem("cards");e&&s(JSON.parse(e))}),[]),Object(c.useEffect)((function(){localStorage.setItem("cards",JSON.stringify(n))}),[n]);var i=function(e){var t=n.findIndex((function(t){return t.id===e.id}));if(t>-1){var c=Object(o.a)(n);c[t]=Object(l.a)(Object(l.a)({},c[t]),e),s(c)}else s([e].concat(Object(o.a)(n)))};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(u,{}),Object(d.jsx)(p,{cards:n,onAddNewLocation:i}),Object(d.jsx)(N,{onAddNewLocation:i,cards:n,handleDeleteElement:function(e){s(n.filter((function(t){return t.id!==e})))}})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),i(e),a(e)}))};n(30);r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(v,{})})}),document.getElementById("root")),g()}},[[36,1,2]]]);
//# sourceMappingURL=main.286a08ea.chunk.js.map